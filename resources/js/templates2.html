<script type="text/html" id="input-range-template">
  <li>
    <div class="column" data-bind="text: name" style="width: 10%"></div>
    <div class="column" style="width: 75%">
      <div class="noUi-target noUi-ltr noUi-horizontal noUi-background">
        <div class="noUi-base">
          <!-- ko if: double_bars -->
            <div class="noUi-origin noUi-connect" data-bind="style: {left: lower_style()} ">
              <div class="noUi-handle noUi-handle-lower" data-bind="event: {mousedown: $root.mouse_down_lower}"></div>
            </div>
          <!-- /ko -->
          <div class="noUi-origin noUi-background" data-bind="style: {left: upper_style()} ">
            <div class="noUi-handle noUi-handle-upper" data-bind="event: {mousedown: $root.mouse_down_upper}"></div>
          </div>
        </div>
      </div>
      <!-- ko if: double_bars -->
        <input class="lower-input" type="text" data-bind="value: lower" />
      <!-- /ko -->
      <input class="upper-input" type="text" data-bind="value: upper" />
    </div>
    <div class="column" data-bind="text: formatted_price" style="width: 15%"></div>
    <div class="clearfix"></div>
  </li>
</script>
<script type="text/html" id="input-checkboxes-template">
  <div class="column" style="text-align: right; width: 85%">
    <label><span data-bind="text: name"></span><input type="checkbox" data-bind="checked: active"></label>
  </div>
  <div class="column" style="width: 15%" data-bind="text: formatted_price"></div>
  <div class="clearfix"></div>
</script>
<script type="text/html" id="virtual-machine-template">
  <!-- ko template: {
        name: "server-template",
        data: {
          server: $data,
          remove: $root.remove_virtual_machine,
          has_licenses: true
        }
      } -->
  <!-- /ko -->
</script>
<script type="text/html" id="container-template">
  <!-- ko template: {
        name: "server-template",
        data: {
          server: $data,
          remove: $root.remove_container,
          has_licenses: false
        }
      } -->
  <!-- /ko -->
</script>
<script type="text/html" id="server-template">
  <div class="panel-body">
    <div class="btn-toolbar" role="toolbar">
      <div class="btn-group navbar-right">
        <button type="button" class="btn btn-default" data-bind="click: remove">
          <span class="glyphicon glyphicon-remove"></span> Remove
        </button>
      </div>
    </div>
    <!-- ko with: server -->
      <div>
        <div class="column" style="width: 20%">
          <span class="glyphicon glyphicon-phone big-letter">
          <a data-bind="event: {click: add_disk}">Add disk</a>
        </div>
        <div class="column" style="width: 80%">
          <ul class="list-unstyled">
            <div data-bind="template: { name: 'input-range-template', foreach: range }"></div>
            <div data-bind="template: { name: 'input-checkboxes-template', foreach: aditional_options }"></div>
          </ul>
        </div>
      </div>
      <ul class="list-unstyled" data-bind="foreach: drives, as: 'drive'">
        <div data-bind="template: { name: template, data: {drive: $data, granparent: $parent} }"></div>
      </ul>
    <!-- /ko -->
    <!-- ko if: has_licenses -->
      <!-- ko template: {name: "licenses-template", data: server}  --><!-- /ko -->
    <!-- /ko -->
  </div>
  <!-- ko with: server -->
    <h3 class="text-right">Total: <span data-bind='text: formatted_price'></span></h3>
  <!-- /ko -->
</script>
<script type="text/html" id="licenses-template">
  <div class="column" style="width: 20%">
    <button class="btn btn-primary btn" data-toggle="modal" data-bind="attr: {'data-target': '#' + unique_id}" >
      Add Microsoft License
    </button>
    <div data-bind="template: {name: 'licenses-modal-template', data: $data}"></div>
  </div>
  <div class="column" style="width: 80%">
    <ul class="list-unstyled">
      <li data-bind="if: windows_server_licenses.value">
        <div data-bind="template: {name: 'system-options-template', data: windows_server_licenses}"></div>
      </li>
      <li data-bind="if: aditional_microsoft_licenses.value">
        <div data-bind="template: {name: 'system-options-template', data: aditional_microsoft_licenses}"></div>
      </li>
      <li data-bind="if: remote_desktops.value">
        <div data-bind="template: {name: 'system-options-template', data: remote_desktops}"></div>
      </li>
    </ul>
  </div>
</script>
<script type="text/html" id="ssd-folder-template">
  <div data-bind="template: {
    name: 'storage-template',
    data: {
      icon: 'glyphicon-th-large',
      can_switch: false,
      remove_disk: granparent.remove_disk,
      data: drive
    }
  }"></div>
</script>
<script type="text/html" id="ssd-drive-template">
  <div data-bind="template: {
    name: 'storage-template',
    data: {
      icon: 'glyphicon-star',
      can_switch: true,
      switch_message: 'Switch to HDD',
      switch_disk: granparent.switch_to_hdd,
      remove_disk: granparent.remove_disk,
      data: drive
    }
  }"></div>
</script>
<script type="text/html" id="drive-template">
  <div data-bind="template: {
    name: 'storage-template',
    data: {
      icon: 'glyphicon-hdd',
      can_switch: true,
      switch_message: 'Switch to SSD',
      switch_disk: granparent.switch_to_ssd,
      remove_disk: granparent.remove_disk,
      data: drive
    }
  }"></div>
</script>
<script type="text/html" id="storage-template">
  <li>
    <div class="column" style="width: 20%">
      <span class="glyphicon big-letter" data-bind="css: icon">
    </div>
    <div class="column" style="width: 80%">
      <ul class="list-unstyled" >
        <div data-bind="template: { name: 'input-range-template', data: data.drive }"></div>
      </ul>
      <!-- ko if: can_switch -->
        <a data-bind="event: {click: switch_disk}, text: switch_message"></a>
      <!-- /ko -->
      <a data-bind="event: {click: remove_disk}">Delete</a>
    </div>
    <div class="clearfix"></div>
  </li>
</script>
<script type="text/html" id="system-options-template">
  <div class="column" style="text-align: right; width: 75%">
    <!-- ko with: value -->
      <span class="text-right" data-bind="text: name"></span>
    <!-- /ko -->
  </div>
  <div class="column" style="width: 10%">
    <a data-bind="event: {click: remove_option}">Remove</a>
  </div>
  <div class="column" style="width: 15%" data-bind="text: formatted_price"></div>
  <div class="clearfix"></div>
</script>
<script type="text/html" id="account-details-template">
  <div>
    <div class="column" style="width: 20%">
      <span class="glyphicon glyphicon-asterisk big-letter">
    </div>
    <div class="column" style="width: 80%">
      <ul class="list-unstyled">
        <div data-bind="template: { name: 'input-range-template', data: bandwith}"></div>
        <div data-bind="template: { name: 'input-choices-template', foreach: options}"></div>
      </ul>
    </div>
  </div>
</script>
<script type="text/html" id="input-choices-template">
  <span data-bind="text: name"></span>
  <select data-bind="options: range, value: value"></select>
  <span data-bind="text: formatted_price"></span>
</script>
<script type="text/html" id="licenses-modal-template">
  <div data-bind="attr: { id: unique_id }" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
          <h4 class="modal-title" id="mySmallModalLabel">Add Microsoft Licenses</h4>
        </div>
        <div class="panel-heading">
          Windows Server Licenses
        </div>
        <div class="modal-body">
          <!-- ko template: {name: 'system-options-modal-template', data: windows_server_licenses} --><!-- /ko -->
        </div>
        <div class="panel-heading">
          Other Microsoft Server Licenses
        </div>
        <div class="modal-body">
          <!-- ko template: {name: 'system-options-modal-template', data: aditional_microsoft_licenses} --><!-- /ko -->
          <label>
            <span data-bind="text: remote_desktops.name"></span>
            <select class="form-control" data-bind="options: [0,1,2,3,4], value: remote_desktops.selected"></select>
            <span>$<span data-bind="text: remote_desktops.price"></span>/month</span>
          </label>
        </div>
      </div>
    </div>
</script>
<script type="text/html" id="system-options-modal-template">
  <!-- ko foreach: options -->
    <div class="radio">
      <label>
        <span data-bind="text: name"></span>
        <input type="radio" data-bind="checkedValue: $data, checked: $parent.value" />
        <span>$<span data-bind="text: price"></span>/month</span>
      </label>
    </div>
  <!-- /ko -->
</script>

  <!-- <pre data-bind="text: ko.toJSON($data, null, 2)"></pre> -->

